<div class="row-fluid" data-ng-controller="UserCtrl">
	<div class="span6 offset3 well">

		<form name="userForm" class="form-vertical">
			<fieldset><legend>
				User Profile
				<div class="btn-group pull-right">
					<button class="btn btn-primary" data-ng-click="updateUser(button.skip)" data-ng-disabled="userForm.$invalid"><i class="icon-ok"></i> Save</button>
					<button class="btn" data-ng-disabled="!session.user.user_name && !session.user.user_name_first" data-ng-click="button.skip()">Next &raquo;</button>
				</div>
			</legend></fieldset>
			<!--[if gt IE 8]><!-->
	<div class="control-group" data-ui-if="filepicker">
				<!--<label class="control-label" for="user_img">Photo</label>-->

				<div class="controls center">
					<img data-ng-src="img/user/{{user.user_ID}}.png?{{filepicker.timestamp}}" class="img-polaroid" width="100" height="100"/>
					<a href="#filepickerModal" class="btn" data-toggle="modal" data-ng-click="filepicker.upload(settings.filepicker.user_single_image, user.user_ID);" data-ng-disabled="!user.user_ID">Change photo</a>
					<!--<span class="help-block">This photo is your identity and appears with your content.</span>-->
				</div>
			</div>
			<!--<![endif]-->
			<div class="control-group" data-ng-class="{error: (errors.user.user_name)}" data-ui-if="settings.account.user_name">
			<label class="control-label" for="user_name">Username</label>
			<div class="controls">
					<input type="text" class="input-block-level" name="user_name" placeholder="required" data-ng-model="user.user_name" data-ng-minlength="3" data-ng-maxlength="14" data-ng-pattern="/^\w*$/" data-ng-change="check.user_name(user.user_name)" required>
					<span class="help-block error" data-ng-show="userForm.user_name.$error.pattern">only alphanumeric characters and underscores allowed</span>
					<span class="help-block error" data-ng-show="userForm.user_name.$error.minlength">too short</span>
					<span class="help-block error" data-ng-show="userForm.user_name.$error.maxlength">too long</span>
					<span class="help-block error" data-ng-show="errors.user.user_name">{{errors.user.user_name}}</span>
				</div>
			</div>

			<div class="control-group" data-ng-class="{error: (errors.user_name_first)}">
			<label class="control-label" for="user_name_first">First Name</label>
			<div class="controls">
					<input type="text" class="input-block-level" name="user_name_first" placeholder="required" data-ng-model="user.user_name_first" required>
					<span class="help-block error" data-ng-show="errors.user_name_first">{{errors.user_name_first}}</span>
					<span class="help-block error" data-ng-show="userForm.user_name_first.$error.required">Required</span>
				</div>
			</div>

			<div class="control-group" data-ng-class="{error: (errors.user.user_name_last)}">
			<label class="control-label" for="user_name_last">Last Name</label>
			<div class="controls">
					<input type="text" class="input-block-level" name="user_name_last" placeholder="optional" data-ng-model="user.user_name_last">
					<span class="help-block error" data-ng-show="errors.user.user_name_last">{{errors.user.user_name_last}}</span>
					<span class="help-block error" data-ng-show="userForm.user_name_last.$error.required">Required</span>
				</div>
			</div>

			<hr>
			<div class="btn-group pull-right">
				<button class="btn btn-primary" data-ng-click="updateUser()" data-ng-disabled="userForm.$invalid"><i class="icon-ok"></i> Save</button>
				<button class="btn" data-ng-disabled="!session.user.user_name && !session.user.user_name_first" data-ng-click="button.skip()">Next &raquo;</button>
			</div>
		</form>
	</div>
</div>
